{% extends 'base.html' %}
{% load static %}

{% block import %}
<script src="{% static 'global_assets/js/plugins/notifications/noty.min.js' %}"></script>
{% endblock %}

{% block content %}


<div class="card-header header-elements-inline" style="background-color: {{ theme.card_header }}; height: 80px;" >
								<h2 class="card-title w-100" style="text-align: center;">{{ match.category }} - Girone {{ match.tournament}} / Giornata {{ match.tournament_day }}</h2>
							</div>  
						<!-- Post -->
						<div class="card" style="margin:0px 0px 0px 0px; padding: 20px 0px">
							<div class="card-body">
								<div class="mb-4">
							

									<h1 class="font-weight-semibold mb-1" style="text-align: center;">
										<a href="#" class="text-default">{{ match.home_team }} - {{ match.outside_team}}</a>
                                        
									</h1>

                                    <h4  style="text-align: center;">{{ match.date }}</h4>
									<h5  style="text-align: center;">{{ match.gym.address }}</h5>
									<h5  style="text-align: center;">Posti liberi rimanenti: {{ free_seats }}</h5>

								</div>
								<div class="row" >
								<div class="col text-center" style="margin: 20px 20px;">
								<a id="reserve" type="button" class="btn bg-green-400 btn-float"><i class="fas fa-volleyball-ball mr-3 fa-2x spinner" style="margin-left: 20px;"></i> <span>Invia</span></a>
								</div>	
								<div id="map" style="margin: 20px 0px;"></div>
								
								</div>	

							</div>
						</div>
						<!-- /post -->

<script>



$('#reserve').on('click', function(){
    Noty.overrideDefaults({
            theme: 'limitless',
            layout: 'topRight',
            type: 'alert',
            timeout: 2500
        });
$.ajax({
            headers: {'X-CSRFToken': '{{ csrf_token }}'},
            type: "POST",
            url: "/partita/effettua-prenotazione",
            data: {'id': {{match.pk}},},
            success: function(data){
                console.log('success');
                new Noty({
                text: 'Prenotazione effettuata',
                type: 'success'
            }).show();
            },
            error: function(data){
                console.log("FAIL");
                new Noty({
                text: 'Errore',
                type: 'error'
            }).show();
            },
        }); 
})


 </script>

<style>

</style>

{% endblock %}